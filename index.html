<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Professional water testing services for Canadian homes and businesses. Get comprehensive water quality reports with My Water Quality" />
    <!-- Add this meta tag to help with hash-based routing -->
    <meta name="fragment" content="!">
    <title>My Water Quality - Professional Water Testing Services</title>
    
    <!-- Add a script to handle malformed hash URLs -->
    <script>
      // Immediate fix for hash fragments in URLs
      (function() {
        var currentUrl = window.location.href;
        
        // Check if we have a URL that contains a malformed access_token
        if (currentUrl.includes('/%23access_token=') || 
            (currentUrl.includes('/#access_token=') && !currentUrl.includes('/auth/callback'))) {
          console.log('Fixing malformed token URL...');
          
          // Extract the token part
          var tokenPart = '';
          if (currentUrl.includes('/%23access_token=')) {
            tokenPart = currentUrl.split('/%23')[1];
          } else {
            tokenPart = currentUrl.split('/#')[1];
          }
          
          if (tokenPart) {
            // Redirect to the correct callback URL
            var callbackUrl = window.location.origin + '/auth/callback#' + tokenPart;
            console.log('Redirecting to: ' + callbackUrl);
            window.location.replace(callbackUrl);
          }
        }
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>